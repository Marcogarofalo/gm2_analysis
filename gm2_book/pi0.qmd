# $\pi_0$  {#pi0}

```{r ,include=FALSE}
library(Rose)
library(ggplot2)
library(plotly)
library(knitr)
# library(hadron)
# library(kableExtra) # breaks latex
# library(tidyverse)

df <- data.frame(x = 1:5, y = 1:5)
f1 <- function(df) {
  gg <- ggplot(df, aes(x, y)) +
    geom_point()
  assign("ggp", plotly::ggplotly(gg), envir = parent.frame())
  # ggp
  df # NOT returning a plot
}
res1 <- f1(df)
ggp # Let knit handle the plot
myplotly(ggplot())
# widgetframe::frameableWidget(ggplotly(ggp)%>%config(mathjax = "cdn") )
```




```{r, results='asis',echo=FALSE}
ens <- c(
  # "cA.30.32_mu.0.003000",
  #  "cA.40.24_mu.0.004000",
  #  "cA.53.24_mu.0.005300",
  "B64.txt"
  # # "cB.72.96_mu.0.000720",
  # "cC.06.80_mu.0.000600",
  # "cD.54.96_mu.0.000540"
)
source("/home/garofalo/programs/Rose/R/read_block.R")
file <- "/home/garofalo/analysis/pi0/data/B64/out/B64.txt_raw_correlators"
df <- NULL
mt <- read_df(file)
all_obs <- Rose::get_all_corr(mt)
df <- add_corr_to_df("", all_obs, mt, df, number = 1, rename = "<LP(t)>")
#df <- add_corr_to_df("", all_obs, mt, df, number = 2, rename = "<LP(t)>_im")

df <- add_corr_to_df("", all_obs, mt, df, number = 3, rename = "<LP(t)LP(0)>")
#df <- add_corr_to_df("", all_obs, mt, df, number = 4, rename = "<LP(t)LP(0)>_im")


# fit<-get_full_res("ms(MK)",all_obs ,mt)
# cat("$m_s($",substr( e , start = 1 , stop = 8 ),"$)$=", mean_print(fit[1,1],fit[1,2]), "\n\n")

gg <- plot_df_corr_ggplot(df)
fig <- myplotly(gg, to_print = TRUE)
```




```{r, results='asis',echo=FALSE, eval=FALSE}
ens <- c(
  # "cA.30.32_mu.0.003000",
  #  "cA.40.24_mu.0.004000",
  #  "cA.53.24_mu.0.005300",
  "B64.txt"
  # # "cB.72.96_mu.0.000720",
  # "cC.06.80_mu.0.000600",
  # "cD.54.96_mu.0.000540"
)
source("/home/garofalo/programs/Rose/R/read_block.R")
file <- "/home/garofalo/analysis/pi0/data/B64/out/B64.txt_log_meff_shifted"
df <- NULL
mt <- read_df(file)
all_obs <- Rose::get_all_corr(mt)
df <- add_corr_to_df("", all_obs, mt, df, number = 1, rename = "<LP(t)>shift-meff")
df <- add_corr_to_df("", all_obs, mt, df, number = 2, rename = "<LP(t)LP(0)>shift-meff")

# df <- add_corr_to_df("", all_obs, mt, df, number = 3, rename = "<LP(t)LP(0)>")
# df <- add_corr_to_df("", all_obs, mt, df, number = 4, rename = "<LP(t)LP(0)>_im")


# fit<-get_full_res("ms(MK)",all_obs ,mt)
# cat("$m_s($",substr( e , start = 1 , stop = 8 ),"$)$=", mean_print(fit[1,1],fit[1,2]), "\n\n")

gg <- plot_df_corr_ggplot(df)
fig <- myplotly(gg, to_print = TRUE)
```


```{r, results='asis',echo=FALSE}
ens <- c(
  # "cA.30.32_mu.0.003000",
  #  "cA.40.24_mu.0.004000",
  #  "cA.53.24_mu.0.005300",
  "B64.txt"
  # # "cB.72.96_mu.0.000720",
  # "cC.06.80_mu.0.000600",
  # "cD.54.96_mu.0.000540"
)
source("/home/garofalo/programs/Rose/R/read_block.R")
dir <- "/home/garofalo/analysis/pi0/data/B64/out/"
df <- NULL
for (e in ens) {
  mt <- read_df(paste0(dir, e, "_output"))
  all_obs <- Rose::get_all_corr(mt)
  df <- add_corr_to_df("M_{pi0}_disc_shift", all_obs, mt, df)
  df <- add_corr_to_df("M_{pi0}_disc_shift_log", all_obs, mt, df)
  df <- add_corr_to_df("M_{pi0}_disc_sub_vev", all_obs, mt, df)


  # fit<-get_full_res("ms(MK)",all_obs ,mt)
  # cat("$m_s($",substr( e , start = 1 , stop = 8 ),"$)$=", mean_print(fit[1,1],fit[1,2]), "\n\n")
}
gg <- plot_df_corr_ggplot(df)
fig <- myplotly(gg, to_print = TRUE)
```
